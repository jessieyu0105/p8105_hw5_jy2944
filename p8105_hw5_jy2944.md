p8105\_hw5\_jy2944
================
Jie Yu
11/6/2018

-   [Problem 1](#problem-1)
    -   [Import and tidy data](#import-and-tidy-data)
    -   [Spaghetti plot](#spaghetti-plot)

Problem 1
=========

### Import and tidy data

``` r
# Start with a dataframe containing all file names: `list.files()`
study_df = tibble(file_names = list.files(path = "./data/problem1_data")) %>% 
  # Use `map()` to iterate over file names and read in data for each subject, and save the results in a new variable `data`
  mutate(data = map(.x = str_c("./data/problem1_data/", file_names), 
                    ~ read.csv(.x))) %>% 
  unnest() %>%
  # Begin Tidy
  janitor::clean_names() %>% 
  # remove str ".csv" in variable `file_names`
  mutate(file_names = str_replace(file_names, ".csv", "")) %>% 
  # manipulate file names to include study arm and subject ID
  separate(file_names, into = c("group", "subject_id"), sep = "_") %>% 
  # gather weekly observations
  gather(key = "week", value = "subject_data", week_1:week_8) %>% 
  mutate(
    # remove str "week_" in variable `week`
    week = str_replace(week, "week_", ""),
    subject_id = as.integer(subject_id),
    week = as.integer(week)
  )
```

### Spaghetti plot

``` r
study_df %>% 
  ggplot(aes(x = week, y = subject_data, color = group, group = subject_id)) +
  geom_point(alpha = 0.5) +
  geom_line()
```

![](p8105_hw5_jy2944_files/figure-markdown_github/p1_spaghetti_plot-1.png)
